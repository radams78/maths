\chapter{Classes}

\section{Classes}

We speak informally of \emph{classes}. A class is specified by a unary predicate.
We write $\{ x \mid P(x) \}$ for the class determined by the predicate $P(x)$.

\begin{definition}[Membership]
    Let $a$ be an object and $\mathbf{A}$ a class. We define the proposition $a \in \mathbf{A}$
    ($a$ is a \emph{member} or \emph{element} of $A$)
    as follows:

    The proposition $a \in \{ x \mid P(x) \}$ is the proposition $P(a)$.
\end{definition}

\begin{definition}[Equality of Classes]
    Let $\mathbf{A}$ and $\mathbf{B}$ be classes. We say $\mathbf{A}$
    and $\mathbf{B}$ are \emph{equal}, $\mathbf{A} = \mathbf{B}$, if and only if
    they have exactly the same elements.
\end{definition}

\section{Subclasses}

\begin{definition}[Subclass]
    Let $\mathbf{A}$ and $\mathbf{B}$ be classes. 
    We say $\mathbf{A}$ is a \emph{subclass} of $\mathbf{B}$, 
    $\mathbf{A} \subseteq \mathbf{B}$, if and only if every member of 
    $\mathbf{A}$ is a member of $\mathbf{B}$.

    We say $\mathbf{A}$ is a \emph{proper} subclass of $\mathbf{B}$, 
    $\mathbf{A} \subset \mathbf{B}$, if and only if $\mathbf{A} \subseteq
    \mathbf{B}$ and $\mathbf{A} \neq \mathbf{B}$.
\end{definition}

\section{The Empty Class}

\begin{definition}[Empty Class]
    The \emph{empty} class $\emptyset$ is $\{x \mid \bot \}$.
\end{definition}

\section{Finite Classes}

\begin{definition}
    For any objects $a_1$, \ldots, $a_n$, we write $\{ a_1, \ldots, a_n \}$
    for the class $\{ x \mid x = a_1 \vee \cdots \vee x = a_n \}$.
\end{definition}

\section{Universal Class}

\begin{definition}[Universal Class]
    The \emph{universal class} $\mathbf{V}$ is the class $\{ x \mid \top \}$.
\end{definition}

\section{Union}

\begin{definition}[Union]
    For any classes $\mathbf{A}$ and $\mathbf{B}$, the \emph{union}
    $\mathbf{A} \cup \mathbf{B}$ is the class $\{ x \mid x \in \mathbf{A} \vee
    x \in \mathbf{B} \}$.
\end{definition}

\section{Intersection}

\begin{definition}[Intersection]
    For any classes $\mathbf{A}$ and $\mathbf{B}$, the \emph{intersection}
    $\mathbf{A} \cap \mathbf{B}$ is the class $\{ x \mid x \in \mathbf{A} \wedge
    x \in \mathbf{B} \}$.
\end{definition}

\section{Disjoint Classes}

\begin{definition}[Disjoint]
    Classes $\mathbf{A}$ and $\mathbf{B}$ are \emph{disjoint} if and only if
    $\mathbf{A} \cap \mathbf{B} = \emptyset$.
\end{definition}

\section{Relative Complement}

\begin{definition}[Relative Complement]
    For any classes $\mathbf{A}$ and $\mathbf{B}$, the \emph{relative complement}
    $\mathbf{A} - \mathbf{B}$ is $\{ x \in \mathbf{A} \mid x \notin \mathbf{B} \}$.
\end{definition}

\chapter{Sets}

\section{Membership}

We take as undefined the notion of \emph{set}.

We take as undefined the binary relation of \emph{membership}, $\in$. If $a \in A$ we say $a$ is a \emph{member} or \emph{element} of $A$.
If this does not hold, we write $a \notin A$.

\begin{axiom}[Axiom of Extensionality]
    Two sets with exactly the same elements are equal.
\end{axiom}

We may therefore identify the set $A$ with the class $\{x \mid x \in A \}$.

We say a class $\mathbf{A}$ \emph{is a set} iff there exists a set $A$
such that $A = \mathbf{A}$. That is, $\{ x \mid P(x) \}$ is a set if and only
if there exists a set $A$ such that, for all $x$, we have $x \in A$ if and
only if $P(x)$.

\section{The Empty Set}

\begin{axiom}[Empty Set Axiom]
    The empty class $\emptyset$ is a set.
\end{axiom}

\section{Pair Sets}

\begin{axiom}[Pairing Axiom]
    For any objects $u$ and $v$, the class $\{ u, v \}$ is a set.
\end{axiom}

\begin{theorem}
    For any object $a$, the class $\{ a \}$ is a set.
\end{theorem}

\begin{proof}
    \pf\ It is $\{ a, a \}$. \qed
\end{proof}

\section{Unions}

\begin{definition}[Union]
    For any class of sets $\mathbf{A}$, the \emph{union} $\bigcup \mathbf{A}$
    is the class $\{x \mid \exists A \in \mathbf{A}. x \in A \}$.
\end{definition}

\begin{axiom}[Union Axiom]
    For any set $A$, the union $\bigcup A$ is a set.
\end{axiom}

\begin{theorem}
    \label{theorem:union}
    For any sets $A$ and $B$, the class $A \cup B$ is a set.
\end{theorem}

\begin{proof}
    \pf\ It is $\bigcup \{ A, B \}$. \qed
\end{proof}

\begin{theorems}
    For any objects $a_1$, \ldots, $a_n$, the class $\{ a_1, \ldots, a_n \}$
    is a set.
\end{theorems}

\begin{proof}
    \pf\ It is $\{a_1\} \cup \cdots \cup \{a_n\}$. \qed
\end{proof}

\section{Power Set}

\begin{definition}[Power Class]
    For any class $\mathbf{A}$, the \emph{power} class $\pow \mathbf{A}$
    is the class of all subsets of $\mathbf{A}$.
\end{definition}

\begin{axiom}[Power Set Axiom]
    For any set $A$, the power class $\pow A$ is a set.
\end{axiom}

\section{Covers}

\begin{definition}[Cover]
    Let $\mathbf{X}$ be a class and $\mathbf{\AA} \subseteq \pow \mathbf{X}$. 
    Then $\mathbf{\AA}$ \emph{covers} $\mathbf{X}$,
    or is a \emph{covering} of $\mathbf{X}$, if and only if
    $\bigcup \mathbf{\AA} = \mathbf{X}$.
\end{definition}

\section{Subset Axioms}

\begin{axioms}[Subset Axioms, Aussonderung Axioms]
    For any classes $\mathbf{A}$ and set $B$,
    if $\mathbf{A} \subseteq B$
    then $\mathbf{A}$ is a set.
\end{axioms}

\begin{theorem}
    The universal class $\mathbf{V}$ is not a set.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{\assume{$\mathbf{V}$ is a set.}}
    \step{2}{\pflet{$R = \{ x \in \mathbf{V} \mid x \notin x \}$}}
    \step{3}{$R \in R$ if and only if $R \notin R$}
    \qedstep
    \begin{proof}
        \pf\ This is a contradiction.
    \end{proof}
    \qed
\end{proof}

\begin{theorem}
    If $A$ is a set and $\mathbf{B}$ is a class then $A - \mathbf{B}$ is a set.
\end{theorem}

\begin{proof}
    \pf\ It is a subset of $A$. \qed
\end{proof}

\begin{theorem}
    For any set $A$ and class $\mathbf{B}$, the class $A \cap \mathbf{B}$ is a set.
\end{theorem}

\begin{proof}
    \pf\ It is a subset of $A$.
\end{proof}

\section{Intersection}

\begin{definition}[Intersection]
    For any class $\mathbf{A}$ of sets, the \emph{intersection}
    $\bigcap \mathbf{A}$ is the class $\{ x \mid \forall A \in \mathbf{A}. x \in A \}$.
\end{definition}

\begin{theorem}
    For any nonempty class $\mathbf{A}$ of sets, we have $\bigcap \mathbf{A}$
    is a set.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{\pick{$A \in \mathbf{A}$}}
    \step{2}{$\bigcap \mathbf{A} \subseteq A$}
    \qedstep
    \begin{proof}
        \pf\ By a Subset Axiom.
    \end{proof}
    \qed
\end{proof}

\section{Pairwise Disjoint Classes}

\begin{definition}[Pairwise Disjoint]
    Let $\mathbf{A}$ be a class of sets. Then $\mathbf{A}$ is \emph{pairwise disjoint}
    iff any two distinct elements of $\mathbf{A}$ are disjoint.
\end{definition}

\section{Axiom of Choice}

\begin{axiom}[Axiom of Choice]
    Let $\AA$ be a set of pairwise disjoint nonempty sets. Then there exists a set
    $C$ containing exactly one element from each member of $\AA$.
\end{axiom}

\section{Axiom of Regularity}

\begin{axiom}[Regularity]
    For any nonempty set $A$, there exists $m \in A$ such that $m$ and $A$ are disjoint.
\end{axiom}

\begin{theorem}
    No set is a member of itself.
\end{theorem}

\begin{proof}
    \pf\ From the Axiom of Regularity, for any set $A$, we have $A$ and $\{A\}$
    are disjoint, i.e. $A \notin A$. \qed
\end{proof}

\begin{theorem}
    There are no sets $A$ and $B$ such that $A \in B$ and $B \in A$.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{\pflet{$A$ and $B$ be sets.}}
    \step{2}{\pick\ $m \in \{A,B\}$ such that $m \cap \{A,B\} = \emptyset$}
    \step{3}{\case{$m = A$}}
    \begin{proof}
        \pf\ In this case $B \notin A$.
    \end{proof}
    \step{4}{\case{$m = B$}}
    \begin{proof}
        \pf\ In this case $A \notin B$.
    \end{proof}
    \qed
\end{proof}

\section{Transitive Sets}

\begin{definition}[Transitive Set]
    A set $A$ is \emph{transitive} if and only if, whenever $x \in y \in A$
    then $x \in A$.
\end{definition}

\begin{theorem}
    Let $A$ be a set. Then the following are equivalent.
    \begin{enumerate}
        \item $A$ is transitive.
        \item $\bigcup A \subseteq A$
        \item For all $a \in A$ we have $a \subseteq A$
        \item $A \subseteq \pow A$
    \end{enumerate}
\end{theorem}

\begin{proof}
    \pf\ From definitions. \qed
\end{proof}

\section{Partitions}

\begin{definition}[Partition]
    A \emph{partition} $P$ of a set $A$ is a set of nonempty subsets of $A$ such that:
    \begin{enumerate}
        \item For all $x \in A$ there exists $S \in P$ such that $x \in S$.
        \item Any two distinct elements of $P$ are disjoint.
    \end{enumerate}
\end{definition}

\chapter{Relations}

\section{Ordered Pairs}

\begin{definition}[Ordered Pair]
    For any sets $x$ and $y$, the \emph{ordered pair} $(x,y)$ is defined to be $\{ \{ x \}, \{ x , y \} \}$.    
\end{definition}

\begin{theorem}
    For any sets $u$, $v$, $x$, $y$, we have $(u,v) = (x,y)$ if and only if $u = x$ and $v = y$
\end{theorem}

\begin{proof}
    \pf
    \step{1}{\assume{$\{ \{ u \}, \{ u, v \} \} = \{ \{ x \}, \{ x, y \} \}$}}
    \step{2}{$\{ u \} \in \{ \{ x \}, \{ x, y \} \}$}
    \step{3}{$\{ u, v \} \in \{ \{ x \}, \{ x, y \} \}$}
    \step{4}{$\{ u \} = \{ x \}$ or $\{ u \} = \{ x, y \}$}
    \step{5}{$\{ u, v \} = \{ x \}$ or $\{ u, v \} = \{ x, y \}$}
    \step{6}{\case{$\{ u \} = \{ x, y \}$}}
    \begin{proof}
        \step{a}{$u = x = y$}
        \step{b}{$u = v = x = y$}
        \begin{proof}
            \pf\ From \stepref{5}
        \end{proof}
    \end{proof}
    \step{7}{\case{$\{ u, v \} = \{ x \}$}}
    \begin{proof}
        \pf\ Similar.
    \end{proof}
    \step{8}{\case{$\{ u \} = \{ x \}$ and $\{ u, v \} = \{ x, y \}$}}
    \begin{proof}
        \step{a}{$u = x$}
        \step{b}{$u = y$ or $v = y$}
        \step{c}{\case{$u = y$}}
        \begin{proof}
            \pf\ This case is the case considered in \stepref{6}.
        \end{proof}
        \step{d}{\case{$v = y$}}
        \begin{proof}
            \pf\ We have $u = x$ and $v = y$ as required.
        \end{proof}
    \end{proof}
    \qed
\end{proof}

\begin{lemma}
    \label{lemma:ordered_pair_pow_pow}
    Let $x$, $y$ and $C$ be sets. If $x \in C$ and $y \in C$ then $(x,y) \in \pow \pow C$.
\end{lemma}

\begin{proof}
    \pf
    \step{1}{\pflet{$x$, $y$ and $C$ be sets.}}
    \step{2}{\assume{$x \in C$}}
    \step{3}{\assume{$y \in C$}}
    \step{6}{$\{ x \} \in \pow C$}
    \step{7}{$\{ x, y \} \in \pow C$}
    \step{9}{$\{ \{ x \}, \{ x, y \} \} \in \pow \pow C$}
    \qed 
\end{proof}

\begin{lemma}
    \label{lemma:ordered_pair_union_union}
    Let $x$, $y$ and $A$ be sets. If $(x,y) \in A$ then $x$ and $y$ belong to $\bigcup \bigcup A$.
\end{lemma}

\begin{proof}
    \pf
    \step{1}{\pflet{$x$, $y$ and $A$ be sets.}}
    \step{2}{\assume{$(x,y) \in A$}}
    \step{3}{$\{x,y\} \in \bigcup A$}
    \step{4}{$x \in \bigcup \bigcup A$}
    \step{5}{$y \in \bigcup \bigcup A$}
    \qed
\end{proof}

\section{Cartesian Product}

\begin{definition}[Cartesian Product]
    Let $\mathbf{A}$ and $\mathbf{B}$ be classes. The \emph{Cartesian product} 
    $\mathbf{A} \times \mathbf{B}$ is the class
    $\{ (x,y) \mid x \in \mathbf{A}, y \in \mathbf{B} \}$.
\end{definition}

\begin{theorem}
    For any sets $A$ and $B$, the Cartesian product $A \times B$ is a set.
\end{theorem}

\begin{proof}
    \pf\ It is a subset of $\pow \pow (A \cup B)$ by Lemma \ref{lemma:ordered_pair_pow_pow}. \qed
\end{proof}

\section{Relations}

\begin{definition}[Relation]
    A \emph{relation} is a class of ordered pairs.

    Given a relation $\mathbf{R}$, we write $x\mathbf{R}y$ for $(x,y) \in \mathbf{R}$.

    A relation is \emph{small} iff it is a set.
\end{definition}

\section{Domain}

\begin{definition}[Domain]
    Let $\mathbf{R}$ be a relation. The \emph{domain} of $\mathbf{R}$ is 
    $\dom \mathbf{R} = \{ x \mid \exists y. x\mathbf{R}y \}$.
\end{definition}

\begin{theorem}
    \label{theorem:domain}
    For any set $R$, the domain $\dom R$ is a set.
\end{theorem}

\begin{proof}
    \pf\ It is a subset of $\bigcup \bigcup R$ by Lemma \ref{lemma:ordered_pair_union_union}. \qed
\end{proof}

\section{Range}

\begin{definition}[Range]
    Let $\mathbf{R}$ be a relation. The \emph{range} of $\mathbf{R}$ is 
    $\ran \mathbf{R} = \{ y \mid \exists x. x\mathbf{R}y \}$.
\end{definition}

\begin{theorem}
    \label{theorem:range}
    For any set $R$, the range $\ran R$ is a set.
\end{theorem}

\begin{proof}
    \pf\ It is a subset of $\bigcup \bigcup R$ by Lemma \ref{lemma:ordered_pair_union_union}. \qed
\end{proof}

\section{Single-Rooted}

\begin{definition}[Single-Rooted]
    A relation $\mathbf{R}$ is \emph{single-rooted} if and only if, for all $x$, $x'$, $y$, if $x\mathbf{R}y$ and $x'\mathbf{R}y$ then $x = x'$.
\end{definition}

\section{Inverse}

\begin{definition}[Inverse]
    Let $\mathbf{R}$ be a class. The \emph{inverse} of $\mathbf{R}$ is 
    $\inv{\mathbf{R}} = \{ (y,x) \mid x \mathbf{R} y \}$.
\end{definition}

\begin{theorem}
    For any small relation $R$, the inverse $\inv{R}$ is small.
\end{theorem}

\begin{proof}
    \pf\ It is a subset of $\ran R \times \dom R$. \qed
\end{proof}

\begin{theorem}
    \label{theorem:dom_inv}
    For any relation $\mathbf{F}$, we have $\dom \inv{\mathbf{F}} = \ran \mathbf{F}$.
\end{theorem}

\begin{proof}
    \pf\ For any $x$, we have
    \begin{align*}
        x \in \dom \inv{\mathbf{F}} & \Leftrightarrow \exists y. (x,y) \in \inv{\mathbf{F}} \\
        & \Leftrightarrow \exists y. (y,x) \in \mathbf{F} \\
        & \Leftrightarrow x \in \ran \mathbf{F} & \qed
    \end{align*}
\end{proof}

\begin{theorem}
    \label{theorem:ran_inv}
    For any relation $\mathbf{F}$, we have $\ran \inv{\mathbf{F}} = \dom \mathbf{F}$.
\end{theorem}

\begin{proof}
    \pf\ For any $x$, we have
    \begin{align*}
        x \in \ran \inv{\mathbf{F}} & \Leftrightarrow \exists y. (y,x) \in \inv{\mathbf{F}} \\
        & \Leftrightarrow \exists y. (x,y) \in \mathbf{F} \\
        & \Leftrightarrow x \in \dom \mathbf{F} & \qed
    \end{align*}
\end{proof}

\begin{theorem}
    \label{theorem:inv_inv}
    For any relation $\mathbf{F}$, we have $\inv{(\inv{\mathbf{F}})} = \mathbf{F}$.
\end{theorem}

\begin{proof}
    \pf\ For any $z$ we have
    \begin{align*}
        z \in \inv{(\inv{\mathbf{F}})} & \Leftrightarrow \exists x, y. z = (x,y) \wedge (y,x) \in \inv{\mathbf{F}} \\
        & \Leftrightarrow \exists x,y. z = (x,y) \wedge (x,y) \in \mathbf{F} \\
        & \Leftrightarrow z \in \mathbf{F} & (\text{$\mathbf{F}$ is a relation}) \qed
    \end{align*}
\end{proof}

\section{Composition}

\begin{definition}[Composition]
    Let $\mathbf{R}$ and $\mathbf{S}$ be relations. 
    The \emph{composition} of $\mathbf{R}$ and $\mathbf{S}$ is
    $\mathbf{S} \circ \mathbf{R} = \{ (x,z) \mid \exists y. x \mathbf{R} y \wedge y \mathbf{S} z \}$.
\end{definition}

\begin{theorem}
    If $R$ and $S$ are small relations then $S \circ R$ is small.
\end{theorem}

\begin{proof}
    \pf\ It is a subset of $\dom R \times \ran S$. \qed
\end{proof}

\begin{theorem}
    For any relations $\mathbf{F}$ and $\mathbf{G}$, we have
    $\inv{(\mathbf{G} \circ \mathbf{F})} = \inv{\mathbf{F}} \circ \inv{\mathbf{G}}$.
\end{theorem}

\begin{proof}
    \pf
    \begin{align*}
        (x,z) \in \inv{(\mathbf{G} \circ \mathbf{F})} & \Leftrightarrow (z,x) \in \mathbf{G} \circ \mathbf{F} \\
        & \Leftrightarrow \exists y. z\mathbf{F}y \wedge y\mathbf{G}x \\
        & \Leftrightarrow \exists y. (y,z) \in \inv{\mathbf{F}} \wedge (x,y) \in \inv{\mathbf{G}} \\
        & \Leftrightarrow (x,z) \in \inv{\mathbf{F}} \circ \inv{\mathbf{G}} & \qed
    \end{align*}
\end{proof}

\section{Restriction}

\begin{definition}[Restriction]
    Let $\mathbf{R}$ be a relation and $\mathbf{A}$ a class. 
    The \emph{restriction} of $\mathbf{R}$ to $\mathbf{A}$
    is $\mathbf{R} \restriction \mathbf{A} = 
    \{ (x,y) \mid x \in \mathbf{A} \wedge x\mathbf{R}y \}$.
\end{definition}

\begin{theorem}
    If $R$ is a small relation then $R \restriction \mathbf{A}$ is small.    
\end{theorem}

\begin{proof}
    \pf\ Since it is a subset of $R$. \qed
\end{proof}

\section{Image}

\begin{definition}[Image]
    Let $\mathbf{F}$ be a relation and $\mathbf{A}$ a class. The \emph{image} of $\mathbf{A}$
    under $\mathbf{F}$ is $\mathbf{F}(\mathbf{A}) = \{ \mathbf{F}(x) \mid x \in \mathbf{A} \}$.
\end{definition}

\begin{theorem}
    If $F$ is small then $F(\mathbf{A})$ is a set.
\end{theorem}

\begin{proof}
    \pf\ Since it is a subset of $\ran F$. \qed
\end{proof}

\begin{theorem}
    For any relation $\mathbf{F}$ and class of sets $\mathbf{\AA}$ we have
    \[ \mathbf{F} \left( \bigcup \mathbf{\AA} \right) = \bigcup_{A \in \mathbf{\AA}} \mathbf{F}(A) \]
\end{theorem}

\begin{proof}
    \pf\ Each is the class of all $y$ such that $\exists x. \exists A.
    x \in A \in \mathbf{\AA} \wedge y = \mathbf{F}(x)$. \qed
\end{proof}

\begin{theorem}
    For any relation $\mb{F}$ and classes $\mb{A_1}$, \ldots, $\mb{A_n}$, we have
    \[ \mb{F}(\mb{A_1} \cup \cdots \cup \mb{A_n}) = \mb{F}(\mb{A_1}) \cup \cdots \cup \mb{F}(\mb{A_n}) \enspace . \]
\end{theorem}

\begin{proof}
    \pf\ Similar. \qed
\end{proof}

\begin{theorem}
    For any relation $\mb{F}$ and class of sets $\mb{\AA}$, we have
    \[ \mb{F} \left( \bigcap \mb{\AA} \right) \subseteq \bigcap_{A \in \mb{\AA}} \mb{F}(A) \enspace . \]
    Equality holds if $\mb{F}$ is single-rooted and $\mb{\AA}$ is nonempty.
\end{theorem}

\begin{proof}
    \pf
    \step{a}{$\mathbf{F} \left( \bigcap \mathbf{\AA} \right) \subseteq \bigcap_{A \in \mathbf{\AA}} \mathbf{F}(A)$}
    \begin{proof}
        \step{i}{\pflet{$y \in \mathbf{F} \left( \bigcap \mathbf{\AA} \right)$}}
        \step{ii}{\pick\ $x \in \bigcap \mathbf{\AA}$ such that $y = \mathbf{F}(x)$}
        \step{iii}{\pflet{$A \in \mathbf{\AA}$}}
        \step{iv}{$x \in A$}
        \step{v}{$y \in \mathbf{F}(A)$}
    \end{proof}
    \step{b}{If $\mathbf{F}$ is single-rooted then $\mathbf{F} \left( \bigcap \mathbf{\AA} \right) = \bigcap_{A \in \mathbf{\AA}} \mathbf{F}(A)$}
    \begin{proof}
        \step{i}{\assume{$\mathbf{F}$ is single-rooted and $\mb{\AA}$ is nonempty.}}
        \step{ii}{\pflet{$y \in \bigcap_{A \in \mathbf{\AA}} \mathbf{F}(A)$}}
        \step{iii}{\pick\ $A \in \mathbf{\AA}$}
        \step{iv}{\pick\ $x \in A$ such that $y = \mathbf{F}(x)$}
        \step{v}{$x \in \bigcap \mathbf{\AA}$}
        \begin{proof}
            \step{one}{\pflet{$A' \in \mathbf{\AA}$}}
            \step{two}{\pick\ $x' \in A'$ such that $y = \mathbf{F}(x')$}
            \step{three}{$x = x'$}
            \begin{proof}
                \pf\ By \stepref{i}.
            \end{proof}
            \step{four}{$x \in A'$}
        \end{proof}
    \end{proof}
    \qed
\end{proof}

\begin{theorem}
    For any relation $\mathbf{F}$ and classes $\mb{A_1}$, \ldots, $\mb{A_n}$, we have
    \[ \mathbf{F}(\mb{A_1} \cap \cdots \cap \mb{A_n}) \subseteq \mathbf{F}(\mb{A_1}) \cap \cdots \cap \mathbf{F}(\mb{A_n}) \enspace . \]
    Equality holds if $\mathbf{F}$ is single-rooted.
\end{theorem}

\begin{proof}
    \pf\ Similar.
\end{proof}

\begin{theorem}
    For any relation $\mb{F}$ and classes $\mb{A}$ and $\mb{B}$, we have
    \[ \mb{F}(\mb{A}) - \mb{F}(\mb{B}) \subseteq \mb{F}(\mb{A} - \mb{B}) \enspace . \]
    Equality holds if $\mb{F}$ is single-rooted.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{\pflet{$\mathbf{F}$, $\mathbf{A}$ and $\mathbf{B}$ be sets.}}
    \step{2}{$\mathbf{F}(\mathbf{A}) - \mathbf{F}(\mathbf{B}) \subseteq \mathbf{F}(\mathbf{A} - \mathbf{B})$}
    \begin{proof}
        \step{a}{\pflet{$y \in \mathbf{F}(\mathbf{A}) - \mathbf{F}(\mathbf{B})$}}
        \step{b}{\pick\ $x \in \mathbf{A}$ such that $x\mathbf{F}y$}
        \step{c}{$x \in \mathbf{A} - \mathbf{B}$}
    \end{proof}
    \step{3}{If $\mathbf{F}$ is single-rooted then $\mathbf{F}(\mathbf{A}-\mathbf{B}) = \mathbf{F}(\mathbf{A}) - \mathbf{F}(\mathbf{B})$.}
    \begin{proof}
        \step{a}{\assume{$\mathbf{F}$ is single-rooted.}}
        \step{b}{\pflet{$y \in \mathbf{F}(\mathbf{A}-\mathbf{B})$}}
        \step{c}{\pick\ $x \in \mathbf{A} - \mathbf{B}$ such that $y = \mathbf{F}(x)$}
        \step{d}{$y \in \mathbf{F}(\mathbf{A})$}
        \step{e}{$y \notin \mathbf{F}(\mathbf{B})$}
        \begin{proof}
            \step{i}{\assume{for a contradiction $x' \in \mathbf{B}$ and $x'\mathbf{F}y$}}
            \step{ii}{$x' = x$}
            \begin{proof}
                \pf\ From \stepref{a}
            \end{proof}
            \step{iii}{$x \in \mathbf{B}$}
            \qedstep
            \begin{proof}
                \pf\ This contradicts \stepref{c}.
            \end{proof}
        \end{proof}
    \end{proof}
    \qed
\end{proof}


\section{Reflexive Relations}

\begin{definition}[Reflexive]
    Let $\mathbf{R}$ be a relation on $\mathbf{A}$. Then $\mathbf{R}$ is \emph{reflexive} on $A$
    if and only if, for all $x \in \mathbf{A}$, we have $x\mathbf{R}x$.
\end{definition}

\section{Symmetric}

\begin{definition}[Symmetric (Pairing)]
    Let $\mathbf{R}$ be a relation. Then $\mathbf{R}$ is \emph{symmetric} if and only if,
    whenever $x\mathbf{R}y$, then $y\mathbf{R}x$.
\end{definition}

\section{Transitivity}

\begin{definition}[Transitivity (Pairing)]
    Let $\mathbf{R}$ be a relation. Then $\mathbf{R}$ is \emph{transitive} if and only if,
    whenever $x\mathbf{R}y$ and $y\mathbf{R}z$, then $x\mathbf{R}z$.
\end{definition}

\section{Equivalence Relations}

\begin{definition}[Equivalence Relation (Pairing)]
    Let $\mathbf{R}$ be a relation on $\mathbf{A}$. Then $\mathbf{R}$ is an \emph{equivalence relation}
    on $\mathbf{A}$ if and only if $\mathbf{R}$ is reflexive on $\mathbf{A}$, symmetric and transitive.
\end{definition}

\begin{theorem}
    If $\mathbf{R}$ is a symmetric and transitive relation then $\mathbf{R}$ is an equivalence
    relation on $\fld \mathbf{R}$.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{\pflet{$\mathbf{R}$ be a symmetric and transitive relation.}}
    \step{2}{\pflet{$x \in \fld \mathbf{R}$}}
    \step{3}{\pick\ $y$ such that $x\mathbf{R}y$ or $y\mathbf{R}x$}
    \step{4}{$x\mathbf{R}y$ and $y\mathbf{R}x$}
    \begin{proof}
        \pf\ By symmetry.
    \end{proof}
    \step{5}{$x\mathbf{R}x$}
    \begin{proof}
        \pf\ By transitivity.
    \end{proof}
    \qed
\end{proof}

\section{Equivalence Class}

\begin{definition}[Equivalence Class]
    Let $\mathbf{R}$ be an equivalence relation on $\mathbf{A}$ and $a \in \mathbf{A}$.
    Then the
    \emph{equivalence class} of $a$ \emph{modulo} $\mathbf{R}$ is
    \[ [a]_\mathbf{R} = \{ x \in \mathbf{A} \mid a\mathbf{R}x \} \enspace . \]
\end{definition}

\begin{lemma}
    \label{lemma:equivalence_classes}
    Let $\mathbf{R}$ be an equivalence relation on $\mathbf{A}$ and $x,y \in \mathbf{A}$.
    Then $[x]_\mathbf{R} = [y]_\mathbf{R}$ if and only if $x\mathbf{R}y$.
\end{lemma}

\begin{proof}
    \pf
    \step{1}{If $[x]_\mathbf{R} = [y]_\mathbf{R}$ then $x\mathbf{R}y$.}
    \begin{proof}
        \step{a}{\assume{$[x]_\mathbf{R} = [y]_\mathbf{R}$}}
        \step{b}{$y \in [y]_\mathbf{R}$}
        \begin{proof}
            \pf\ Since $y\mathbf{R}y$ by reflexivity.
        \end{proof}
        \step{c}{$y \in [x]_\mathbf{R}$}
        \step{d}{$x\mathbf{R}y$}
    \end{proof}
    \step{2}{If $x\mathbf{R}y$ then $[x]_\mathbf{R} = [y]_\mathbf{R}$.}
    \begin{proof}
        \step{a}{\assume{$x\mathbf{R}y$}}
        \step{b}{$[y]_\mathbf{R} \subseteq [x]_\mathbf{R}$}
        \begin{proof}
            \pf\ If $y\mathbf{R}z$ then $x\mathbf{R}z$ by transitivity.
        \end{proof}
        \step{c}{$[x]_\mathbf{R} \subseteq [y]_\mathbf{R}$}
        \begin{proof}
            \pf\ Similar since $y\mathbf{R}x$ by symmetry.
        \end{proof}
    \end{proof}
    \qed
\end{proof}

\section{Quotient Sets}

\begin{definition}[Quotient Set]
    Let $R$ be an equivalence relation on $A$. The \emph{quotient set} $A / R$
    is the set of all equivalence classes modulo $R$.

    This is a set because it is a subset of $\pow A$.
\end{definition}

\begin{theorem}
    Let $R$ be an equivalence relation on $A$. Then the quotient set $A / R$
    is a partition of $A$.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{For all $x \in A$ there exists $y \in A$ such that $x \in [y]_R$}
    \begin{proof}
        \pf\ Take $y = x$.
    \end{proof}
    \step{2}{Any two distinct equivalence classes are disjoint.}
    \begin{proof}
        \step{a}{\assume{$z \in [x]_R$ and $z \in [y]_R$}}
        \step{b}{$xRz$ and $yRz$}
        \step{c}{$[x]_R = [z]_R = [y]_R$}
        \begin{proof}
            \pf\ Lemma \ref{lemma:equivalence_classes}.
        \end{proof}
    \end{proof}
    \qed
\end{proof}

\section{Minimal Elements}

\begin{definition}[Minimal]
    Let $R$ be a binary relation and $A$ a set. An element $a \in A$
    is \emph{minimal} w.r.t. $R$ iff there is no $x \in A$
    such that $xRa$.
\end{definition}

\section{Well-Founded Relations}

\begin{definition}[Well-Founded]
    Let $R$ be a relation on $A$. Then $R$ is \emph{well-founded}
    iff every nonempty subset of $A$ has an $R$-minimal element.
\end{definition}

\begin{theorem}[Transfinite Induction]
    Let $R$ be a well-founded relation on $A$ and $B \subseteq A$.
    Assume that, for every $t \in A$, if $\{ x \in A \mid x Rt \} \subseteq B$
    then $t \in B$. Then we have $B = A$.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{\assume{for a contradiction $B \neq A$}}
    \step{2}{\pick\ an $R$-minimal element $t$ of $A - B$}
    \step{3}{For all $x \in A$, if $xRt$ then $x \in B$}
    \step{4}{$t \in B$}
    \qedstep
    \begin{proof}
        \pf\ This contradicts \stepref{2}.
    \end{proof}
    \qed
\end{proof}

\section{Transitive Closure}

\begin{theorem}
    Let $R$ be a relation. Then there exists a unique relation
    $R^t$ such that $R^t$ is transitive, $R \subseteq R^t$,
    and for every transitive relation $S$ with $R \subseteq S$
    we have $R^t \subseteq S$.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{\pflet{$R^t = \bigcap \{ S \mid R \subseteq S, S \text{ is a transitive relation} \}$}}
    \step{2}{$R^t$ is transitive}
    \begin{proof}
        \step{a}{\pflet{$(x,y),(y,z) \in R^t$} \prove{$(x,z) \in R^t$}}
        \step{b}{\pflet{$S$ be a transitive relation with $R \subseteq S$}}
        \step{c}{$xSy$ and $ySz$}
        \step{d}{$xSz$}
    \end{proof}
    \step{3}{$R \subseteq R^t$}
    \step{4}{For any transitive relation $S$ with $R \subseteq S$ we have $R^t
    \subseteq S$}
    \step{5}{$R^t$ is unique.}
    \begin{proof}
        \pf\ If $S$ satisfies the same properties then $R^t \subseteq S$
        and $S \subseteq R^t$.
    \end{proof}
    \qed
\end{proof}

\begin{definition}[Transitive Closure]
    The \emph{transitive closure} of a relation $R$ is this relation $R^t$.
\end{definition}

\begin{theorem}
    If $R$ is well-founded then $R^t$ is well-founded.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{\pflet{$R$ be a well-founded relation on $A$}}
    \step{2}{For all $x, y \in A$, if $x R^t y$ then there exists $z$ such that $z R^t y$}
    \begin{proof}
        \step{a}{\pflet{$S = \{ (x,y) \mid \exists z. zRy \}$} \prove{$R^t \subseteq S$}}
        \step{b}{$S$ is transitive}
        \begin{proof}
            \step{i}{\assume{$xSy$ and $ySz$}}
            \step{ii}{There exists $t$ such that $tRz$}
            \step{iii}{$xSz$}
        \end{proof}
        \step{c}{$R \subseteq S$}
    \end{proof}
    \step{2}{\pflet{$B \subseteq A$ be nonempty.}}
    \step{3}{\pick\ an $R$-minimal element $b$ of $B$}
    \step{4}{$b$ is $R^t$-minimal.}
    \begin{proof}
        \pf\ From \stepref{2}.
    \end{proof}
    \qed
\end{proof}

\chapter{Functions}

\section{Functions}

\begin{definition}[Class Function]
    A \emph{class function} is a relation $\mathbf{F}$ such that, for all $x$, $y$,
    $y'$, if $x\mathbf{F}y$ and $x\mathbf{F}y'$ then $y = y'$.

    If $\mathbf{F}$ is a class function and $x \in \dom \mathbf{F}$, then we write
    $\mathbf{F}(x)$ for the unique $y$ such that $x \mathbf{F} y$.

    We write $\mathbf{F} : \mathbf{A} \rightarrow \mathbf{B}$ iff $\mathbf{F}$ is a class function,
    $\dom \mathbf{F} = \mathbf{A}$ and $\ran \mathbf{F} \subseteq \mathbf{B}$.

    A \emph{function} is a class function that is a set.
\end{definition}

\begin{theorem}
    \label{theorem:Axiom_of_Choice2}
    The Axiom of Choice is equivalent to the following statement:

    For any small relation $R$, there exists a function $H \subseteq R$ such that 
    $\dom H = \dom R$.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{If, for any small relation $R$, there exists a function $H \subseteq R$
    such that $\dom H = \dom R$, then the Axiom of Choice is true.}
    \begin{proof}
        \step{a}{\assume{for any small relation $R$, there exists a function $H \subseteq R$
        such that $\dom H = \dom R$}}
        \step{b}{\pflet{$\AA$ be a set of pairwise disjoint nonempty sets.}}
        \step{c}{\pflet{$R = \{ (A, a) \mid A \in \AA, a \in A \}$}}
        \step{d}{\pick\ a function $H \subseteq R$ such that $\dom H = \dom R$}
        \begin{proof}
            \pf\ By \stepref{a}.
        \end{proof}
        \step{e}{\pflet{$C = \ran H$}}
        \step{f}{$C$ contains exactly one element from each $A \in \AA$, namely $H(A)$.}
    \end{proof}
    \step{2}{If the Axiom of Choice is true then, for any small relation $R$, there exists a function $H \subseteq R$
    such that $\dom H = \dom R$.}
    \begin{proof}
        \step{a}{\assume{the Axiom of Choice}}
        \step{b}{\pflet{$R$ be a small relation.}}
        \step{c}{For $a \in \dom R$, \pflet{$R_a = \{ (a,b) \mid aRb \}$}}
        \step{d}{\pflet{$\AA = \{ R_a \mid a \in \dom R \}$}}
        \step{e}{\pick\ a set $H$ that contains exactly one element from each $R_a$.}
        \begin{proof}
            \pf\ By the Axiom of Choice (\stepref{a}).
        \end{proof}
        \step{f}{$H$ is a function, $H \subseteq R$ and $\dom H = \dom R$.}
    \end{proof}
    \qed
\end{proof}

\begin{theorem}
    \label{theorem:inv_function}
    For any relation $\mathbf{F}$, we have $\inv{\mathbf{F}}$ is a class function if and only if $\mathbf{F}$ is single-rooted.
\end{theorem}

\begin{proof}
    \pf\ Immediate from definitions. \qed
\end{proof}

\begin{theorem}
    Let $\mathbf{F}$ be a relation. Then $\mathbf{F}$ is a class function if and only if $\inv{\mathbf{F}}$ is single-rooted.
\end{theorem}

\begin{proof}
    \pf\ Immediate from definitions. \qed
\end{proof}

\begin{theorem}
    \label{theorem:comp_function}
    Let $\mathbf{F}$ and $\mathbf{G}$ be class functions. Then $\mathbf{G} \circ \mathbf{F}$ is a function, its domain
    is $\{ x \in \dom \mathbf{F} \mid \mathbf{F}(x) \in \dom \mathbf{G} \}$, and for $x$ in this domain,
    we have $(\mathbf{F} \circ \mathbf{G})(x) = \mathbf{F}(\mathbf{G}(x))$.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{$\mathbf{G} \circ \mathbf{F}$ is a class function.}
    \begin{proof}
        \step{a}{\pflet{$x (\mathbf{G} \circ \mathbf{F}) z$ and $x (\mathbf{G} \circ \mathbf{F}) z'$}}
        \step{b}{\pick\ $y$, $y'$ such that $x \mathbf{F} y$, $x \mathbf{F} y'$, $y \mathbf{G} z$ and $y' \mathbf{G} z'$}
        \step{c}{$y = y'$}
        \begin{proof}
            \pf\ Since $\mathbf{F}$ is a class function.
        \end{proof}
        \step{d}{$z = z'$}
        \begin{proof}
            \pf\ Since $\mathbf{G}$ is a class function.
        \end{proof}
    \end{proof}
    \step{2}{$\dom (\mathbf{G} \circ \mathbf{F}) = \{ x \in \dom \mathbf{F} \mid \mathbf{F}(x) \in \dom \mathbf{G} \}$}
    \begin{proof}
        \pf
        \begin{align*}
            x \in \dom (\mathbf{G} \circ \mathbf{F}) & \Leftrightarrow \exists z. x(\mathbf{G} \circ \mathbf{F})z \\
            & \Leftrightarrow \exists y, z. x\mathbf{F}y \wedge y\mathbf{G}z \\
            & \Leftrightarrow x \in \dom \mathbf{F} \wedge \mathbf{F}(x) \in \dom \mathbf{G}
        \end{align*}
    \end{proof}
    \step{3}{For $x$ in this domain, we have $(\mathbf{F} \circ \mathbf{G})(x) = \mathbf{F}(\mathbf{G}(x))$.}
    \begin{proof}
        \pf\ Since $(x,\mathbf{F}(x)) \in \mathbf{F}$ and $(\mathbf{F}(x),\mathbf{G}(\mathbf{F}(x))) \in \mathbf{G}$.
    \end{proof}
    \qed
\end{proof}

\begin{axioms}[Replacement]
    Let $\mathbf{H}$ be a class function. If $\dom \mathbf{H}$ is a set
    then $\mathbf{H}$ is a set.
\end{axioms}

\section{Choice Functions}

\begin{definition}[Choice Function]
    Let $\BB$ be a set of nonempty sets. A \emph{choice function} for $\BB$ is a function $c : \BB \rightarrow \bigcup \BB$ such that, for all $B \in \BB$,
    we have $c(B) \in B$.
\end{definition}

\begin{theorem}
    The Axiom of Choice is equivalent to the statement: every set of nonempty sets
    has a choice function.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{If the Axiom of Choice is true then every set of nonempty sets has
    a choice function.}
    \begin{proof}
        \step{a}{\assume{The Axiom of Choice}}
        \step{b}{\pflet{$\BB$ be a set of nonempty sets.}}
        \step{c}{\pflet{$R = \{ (A, a) \mid A \in \BB, a \in A \}$}}
        \step{ca}{$R$ is a set.}
        \begin{proof}
            \pf\ It is a subset of $\BB \times \bigcup \BB$.
        \end{proof}
        \step{d}{\pick\ a function $c \subseteq R$ with $\dom c = \dom R$}
        \begin{proof}
            \pf\ Theorem \ref{theorem:Axiom_of_Choice2}.
        \end{proof}
        \step{e}{$\dom c = \BB$}
        \begin{proof}
            \step{i}{\pflet{$A \in \BB$}}
            \step{ii}{\pick\ $a \in A$}
            \begin{proof}
                \pf\ $A$ is nonempty (\stepref{b})
            \end{proof}
            \step{iii}{$ARa$}
            \begin{proof}
                \pf\ By \stepref{c}.
            \end{proof}
            \step{iv}{$A \in \dom R$}
            \step{v}{$A \in \dom c$}
            \begin{proof}
                \pf\ By \stepref{d}.
            \end{proof}
        \end{proof}
        \step{f}{For all $A \in \BB$ we have $c(A) \in A$}
        \begin{proof}
            \pf\ From \stepref{d}.
        \end{proof}
    \end{proof}
    \step{2}{If every set of nonempty sets has a choice function then the Axiom of
    Choice is true.}
    \begin{proof}
        \step{a}{\assume{Every set of nonempty sets has a choice function.}}
        \step{b}{\pflet{$\AA$ be a set of pairwise disjoint nonempty sets.}}
        \step{c}{\pick\ a choice function $c$ for $\AA$}
        \step{d}{\pflet{$C = \ran c$}}
        \step{e}{$C$ contains exactly one element from each $A \in \AA$, namely $c(A)$}
    \end{proof}
    \qed
\end{proof}

\section{Injective Functions}

\begin{definition}[Injective]
    We call a class function \emph{one-to-one}, \emph{injective} or an \emph{injection}
     if and only if it is single-rooted.
\end{definition}

\begin{theorem}
    \label{theorem:inv_F_of_F}
    Let $\mathbf{F}$ be a one-to-one class function and $x \in \dom \mathbf{F}$.
    Then $\inv{\mathbf{F}}(\mathbf{F}(x)) = x$.
\end{theorem}

\begin{proof}
    \pf\ We have $(x, \mathbf{F}(x)) \in \mathbf{F}$ and so 
    $(\mathbf{F}(x), x) \in \inv{\mathbf{F}}$. \qed
\end{proof}

\begin{theorem}
    Let $\mathbf{F}$ be a one-to-one function and $y \in \ran \mathbf{F}$.
    Then $\mathbf{F}(\inv{\mathbf{F}}(y)) = y$.
\end{theorem}

\begin{proof}
    \pf\ From Theorems \ref{theorem:dom_inv}, \ref{theorem:inv_inv} and \ref{theorem:inv_F_of_F}. \qed
\end{proof}

\section{Surjective Functions}

\begin{definition}[Surjective]
    Let $\mathbf{F} : \mathbf{A} \rightarrow \mathbf{B}$. Then $\mathbf{F}$ is \emph{surjective} if and only if
    $\ran \mathbf{F} = \mathbf{B}$.
\end{definition}

\section{Bijective Functions}

\begin{definition}[Bijective]
    A class function $\mathbf{F} : \mathbf{A} \rightarrow \mathbf{B}$ is
    \emph{bijective} or a \emph{bijection} if and only if it is injective and
    surjective.
\end{definition}

\section{Identity Function}

\begin{definition}[Identity class function]
    Let $\mathbf{A}$ be a class. The \emph{identity class function} $\id{\mathbf{A}}$ on $\mathbf{A}$ is
    $\{ (x,x) \mid x \in \mathbf{A} \}$.
\end{definition}

\begin{theorem}
    For any set $A$, we have $\id{A}$ is a function.
\end{theorem}

\begin{proof}
    \pf\ It is a subset of $A \times A$. \qed
\end{proof}

\begin{theorem}
    Let $F : A \rightarrow B$ and $A$ be nonempty. Then there exists a function
    $G : B \rightarrow A$ such that $G \circ F = \id{A}$ if and only if $F$
    is one-to-one.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{\pflet{$F : A \rightarrow B$}}
    \step{2}{\assume{$A$ is nonempty}}
    \step{3}{If there exists $G : B \rightarrow A$ such that $G \circ F = \id{A}$
    then $F$ is one-to-one.}
    \begin{proof}
        \step{a}{\assume{$G : B \rightarrow A$ and $G \circ F = \id{A}$}}
        \step{b}{\pflet{$x,y \in A$}}
        \step{c}{\assume{$F(x) = F(y)$}}
        \step{d}{$x = y$}
        \begin{proof}
            \pf\ $x = G(F(x)) = G(F(y)) = y$.
        \end{proof}
    \end{proof}
    \step{4}{If $F$ is one-to-one then there exists $G : B \rightarrow A$
    such that $G \circ F = \id{A}$.}
    \begin{proof}
        \step{a}{\assume{$F$ is one-to-one.}}
        \step{b}{\pick\ $a \in A$}
        \step{c}{Define $G : B \rightarrow A$ by: $G(y)$ is the $x$ such
        that $F(x) = y$ if $y \in \ran F$, otherwise $G(y) = a$}
        \step{f}{$G \circ F = \id{A}$}
        \begin{proof}
            \pf\ For $x \in A$ we have $(G \circ F)(x) = G(F(x)) = x$ by Theorem \ref{theorem:comp_function}.
        \end{proof}
    \end{proof}
    \qed
\end{proof}

\begin{theorem}
    Let $F : A \rightarrow B$ and $A$ be nonempty. If there exists a function
    $H : B \rightarrow A$ such that $F \circ H = \id{B}$ then $F$
    is surjective.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{\pflet{$F : A \rightarrow B$}}
    \step{2}{\assume{$A$ is nonempty.}}
    \step{a}{\pflet{$H : B \rightarrow A$ satisfy $F \circ H = \id{B}$}}
    \step{b}{\pflet{$y \in B$}}
    \step{c}{$F(H(y)) = y$.}
    \qed
\end{proof}

\begin{theorem}[Choice]
    Let $F : A \rightarrow B$ and $A$ be nonempty. If $F$ is surjective
    then there exists a function $H : B \rightarrow A$ such that $F \circ H = \id{B}$.
\end{theorem}

\begin{proof}
    \pf
    \step{a}{\assume{$F$ is surjective.}}
    \step{b}{\pick\ a function $H \subseteq \inv{F}$ with $\dom H = B$}
    \begin{proof}
        \pf\ By the Axiom of Choice.
    \end{proof}
    \step{c}{$H : B \rightarrow A$}
    \step{d}{$F \circ H = \id{B}$}
    \begin{proof}
        \step{i}{\pflet{$y \in B$}}
        \step{ii}{$(y, H(y)) \in \inv{F}$}
        \step{iii}{$(H(y), y) \in F$}
        \step{iv}{$F(H(y)) = y$}
    \end{proof}
    \qed
\end{proof}

\section{Infinite Cartesian Product}

\begin{definition}[Infinite Cartesian Product]
    Let $H$ be a function with domain $I$ such that, for all $i \in I$,
    $H(i)$ is a set. The \emph{Cartesian product}
    $\prod_{i \in I} H(i)$ is the class of all functions $f$ with domain $I$
    such that, for all $i \in I$, we have $f(i) \in H(i)$.
\end{definition}

\begin{theorem}
    If $H$ is a function with domain $I$ and $H(i)$ is a set for all $i \in I$, then $\prod_{i \in I} H(i)$ is a set.
\end{theorem}

\begin{proof}
    \pf\ It is a subset of $\pow(I \times \bigcup \ran H)$. \qed
\end{proof}

\begin{theorem}[Multiplicative Axiom]
    The Axiom of Choice is equivalent to the \emph{Multiplicative Axiom}: for any function $H$ with domain $I$,
    if $H(i)$ is nonempty for all $i \in I$, then $\prod_{i \in I} H(i)$ is nonempty.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{If the Axiom of Choice is true then the Multiplicative Axiom is true.}
    \begin{proof}
        \step{a}{\assume{The Axiom of Choice}}
        \step{b}{\pflet{$H$ be a function with domain $I$ such that $H(i)$ is nonempty for all $i \in I$.}}
        \step{c}{\pick\ a function $f \subseteq \{ (i, x) \mid x \in H(i) \}$}
        \step{d}{$f \in \prod_{i \in I} H(i)$}
    \end{proof}
    \step{2}{If the Multiplicative Axiom is true
    then the Axiom of Choice is true.}
    \begin{proof}
        \step{a}{\assume{for any function $H$ with domain $I$,
        if $H(i)$ is nonempty for all $i \in I$, then $\prod_{i \in I} H(i)$ is nonempty}}
        \step{b}{\pflet{$R$ be a relation.}}
        \step{c}{\pflet{$I = \dom R$}}
        \step{d}{\pflet{$H$ be the function with domain $I$ such that $H(i) = \{ y \mid iRy \}$ for all $i$.}}
        \step{e}{\pick\ $f \in \prod_{i \in I} H(i)$}
        \step{f}{$f \subseteq R$}
    \end{proof}
    \qed
\end{proof}

\section{Quotient Sets}

\begin{definition}[Canonical Map]
    Let $R$ be an equivalence relation on $A$. The \emph{canonical map} $\phi : A \rightarrow A / R$
    is the function defined by $\phi(a) = [a]_R$.
\end{definition}

\begin{theorem}
    Let $R$ be an equivalence relation on $A$ and $F : A \rightarrow B$.
    Then the following are equivalent:
    \begin{enumerate}
        \item For all $x, y \in A$, if $xRy$ then $F(x) = F(y)$.
        \item There exists $G : A / R \rightarrow B$ such that 
        $F = G \circ \phi$, where $\phi : A \rightarrow A / R$ is the canonical map.
    \end{enumerate}
    In this case, $G$ is unique.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{$1 \Rightarrow 2$}
    \begin{proof}
        \step{a}{\assume{1}}
        \step{b}{Let $G = \{ ([a]_R, b) \mid F(a) = b \}$}
        \step{c}{$G$ is a function.}
        \begin{proof}
            \step{i}{\pflet{$(c,b), (c,b') \in G$}}
            \step{ii}{\pick\ $a, a' \in A$ such that $c = [a]_R = [a']_R$
            with $F(a) = b$ and $F(a') = b'$}
            \step{iii}{$aRa'$}
            \begin{proof}
                \pf\ Lemma \ref{lemma:equivalence_classes}.
            \end{proof}
            \step{iv}{$F(a) = F(a')$}
            \begin{proof}
                \pf\ From \stepref{a}.
            \end{proof}
            \step{v}{$b = b'$}
            \begin{proof}
                \pf\ From \stepref{ii}.
            \end{proof}
        \end{proof}
        \step{d}{$F = G \circ \phi$}
        \begin{proof}
            \pf\ For $a \in A$ we have $G(\phi(a)) = G([a]) = F(a)$.
        \end{proof}
    \end{proof}
    \step{2}{$2 \Rightarrow 1$}
    \begin{proof}
        \step{a}{\pflet{$G : A / R \rightarrow B$ be such that $F = G \circ \phi$}}
        \step{b}{\pflet{$x, y \in A$}}
        \step{c}{\assume{$xRy$}}
        \step{d}{$G([x]) = G([y])$}
        \begin{proof}
            \pf\ Lemma \ref{lemma:equivalence_classes}
        \end{proof}
        \step{d}{$F(x) = F(y)$}
        \begin{proof}
            \pf\ From \stepref{a}.
        \end{proof}
    \end{proof}
    \step{3}{If $G, G' : A / R \rightarrow B$ and $G \circ \phi = G' \circ \phi$
    then $G = G'$}
    \begin{proof}
        \pf\ For any $a \in A$ we have $G([a]) = G'([a])$.
    \end{proof}
    \qed
\end{proof}

\section{Transfinite Recursion}

\begin{theorem}[Transfinite Recursion]
    Let $R$ be a well-founded relation on a set $C$.

    Let $\mathbf{A}$ be a class. Let $\mathbf{B}$ be the class of all functions
    from a subset of $C$ to $\mathbf{A}$.
    Let $\mathbf{F} : \mathbf{B} \times C \rightarrow \mathbf{A}$ be a class function.

    Then there
    exists a unique function $f : C \rightarrow \mathbf{A}$ such that, for all $t \in C$,
    we have $f(t) = \mathbf{F}(f \restriction \{ x \in C \mid x R t \}, t)$.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{Let us say a function $v$ is \emph{acceptable} if and only if
    $\dom v \subseteq C$, $\ran v \subseteq \mathbf{A}$ and, for all 
    $t \in \dom v$, we have $\{ x \in C \mid x R t \} \subseteq \dom v$
    and $v(t) = \mathbf{F}(v \restriction \{ x \in C \mid x R t \})$}
    \step{2}{\pflet{$\mathcal{K}$ be the set of all acceptable functions.}}
    \begin{proof}
        \pf\ This is a set by an Axiom of Replacement.
    \end{proof}
    \step{3}{\pflet{$h = \bigcup \mathcal{K}$}}
    \step{4}{$h$ is a function.}
    \begin{proof}
        \step{a}{\pflet{$x \in C$}}
        \step{b}{\assume{as induction hypothesis, for all $yRx$ we have that, whenever $(y,a)$ and $(y,b)$ in
        $h$ then $a = b$}}
        \step{c}{\assume{$(x,a)$ and $(x,b)$ are in $h$}}
        \step{d}{\pick\ acceptable $u$ and $v$ such that $u(x) = a$ and $v(x) = b$}
        \step{e}{For all $yRx$ we have $u(y) = v(y)$}
        \begin{proof}
            \pf\ From \stepref{b} since $(y,u(y))$ and $(y,v(y))$ are in $h$.
        \end{proof}
        \step{f}{$a = b$}
        \begin{proof}
            \pf
            \begin{align*}
                a & = u(x) & (\text{\stepref{d}}) \\
                & = \mathbf{F}(u \restriction \{ y \in C \mid y R x \}) \\
                & = \mathbf{F}(v \restriction \{ y \in C \mid y R x \}) & (\text{\stepref{e}}) \\
                & = v(x) \\
                & = b & (\text{\stepref{d}})
            \end{align*}
        \end{proof}
        \qedstep
        \begin{proof}
            \pf\ By transfinite induction, for all $x \in C$, if $(x,a)$ and $(x,b)$ are in $h$ then $a = b$.
        \end{proof}
    \end{proof}
    \step{5}{$h$ is acceptable.}
    \begin{proof}
        \step{a}{\pflet{$t \in \dom h$}}
        \step{b}{\pick\ $v$ acceptable such that $(t,h(t)) \in v$}
        \step{c}{$\{ x \in C \mid x R t \} \subseteq \dom v$ and $v(t) = \mathbf{F}(v \restriction \{ x \in C \mid x R t \})$}
        \step{d}{$v \restriction \{ x \in C \mid x R t \} = h \restriction \{ x \in C \mid x R t \}$}
        \begin{proof}
            \pf\ By \stepref{4}.
        \end{proof}
        \step{e}{$h(t) = \mathbf{F}(h \restriction \{ x \in C \mid x R t \})$}
    \end{proof}
    \step{6}{$\dom h = C$}
    \begin{proof}
        \step{a}{\pflet{$t \in C$}}
        \step{b}{\assume{as induction hypothesis, for all $x R t$, we have $x \in \dom h$ }}
        \step{c}{\assume{for a contradiction $t \notin \dom h$}}
        \step{d}{$h \cup (t, \mathbf{F}(h \restriction \{ x \in C \mid x R t \})$ is acceptable)}
        \step{e}{$h \cup (t, \mathbf{F}(h \restriction \{ x \in C \mid x R t \}) \subseteq h$ is acceptable)}
        \qedstep
        \begin{proof}
            \pf\ This contradicts \stepref{c}. Thus, by transfinite induction,
            for all $t \in C$ we have $t \in \dom h$.
        \end{proof}
    \end{proof}
    \step{7}{If $h' : C \rightarrow \mathbf{A}$ is acceptable then $h' = h$.}
    \begin{proof}
        \step{a}{\pflet{$t \in C$}}
        \step{b}{\assume{as induction hypothesis, for all $xRt$, we have 
        $h'(x) = h(x)$}}
        \step{c}{$h'(t) = h(t)$}
        \begin{proof}
            \pf
            \begin{align*}
                h'(t) & = \mathbf{F}(h' \restriction \{ x \in C \mid x R t \}) \\
                & = \mathbf{F}(h \restriction \{ x \in C \mid x R t \}) & (\text{\stepref{b}}) \\
                & = h(t)
            \end{align*}
        \end{proof}
        \qedstep
        \begin{proof}
            \pf\ By transfinite induction, for all $t \in C$, we have $h'(t) = h(t)$.
        \end{proof}
    \end{proof}
    \qed
\end{proof}

\section{Fixed Points}

\begin{definition}[Fixed Point]
    Let $X$ be a set. Let $f : X \rightarrow X$. Then a \emph{fixed point}
    of $f$ is an element $a \in X$ such that $f(a) = a$.
\end{definition}

\chapter{Cardinal Numbers}

\section{Equinumerosity}

\begin{definition}[Equinumerous]
    Two sets $A$ and $B$ are \emph{equinumerous} if and only if there exists
    a bijection between them.
\end{definition}

\begin{theorem}
    Equinumerosity is an equivalence relation on the class of all sets.
\end{theorem}

\begin{theorem}[Cantor]
    No set is equinumerous with its power set.
\end{theorem}

\begin{definition}
    We say a set $A$ is \emph{dominated} by $B$, $A \preccurlyeq B$, iff
    $A$ is equinumerous with a subset of $B$.
\end{definition}

\begin{theorem}
    $A \preccurlyeq A$
\end{theorem}

\begin{theorem}
    If $A \preccurlyeq B \preccurlyeq C$ then $A \preccurlyeq C$.
\end{theorem}

\begin{theorem}[Schr\"{o}der-Bernstein Theorem]
    If $A \preccurlyeq B$ and $B \preccurlyeq A$ then $A \equiv B$.
\end{theorem}

\begin{proof}
    \pf
    \step{1}{\pflet{$f : A \rightarrow B$ and $g : B \rightarrow A$ be injections.}}
    \step{2}{Define a sequence of sets $C_n \subseteq A$ by
    \begin{align*}
        C_0 & = A - \ran g \\
        C_{n+1} & = g(f(C_n))
    \end{align*}    
    }
    \step{3}{Define $h : A \rightarrow B$ by
    \[ h(x) = \begin{cases}
        f(x) & \text{if } x \in \bigcup_n C_n \\
        \inv{g}(x) & \text{if not}
    \end{cases} \] }
    \step{4}{$h$ is a bijection.}
    \qed
\end{proof}

\begin{theorem}[AC]
    For any infinite set $A$ we have $\NN \preccurlyeq A$.
\end{theorem}

\begin{proof}
    \pf\ Given a choice funtion $f$ for $A$, choose a sequence $(a_n)$ in $A$
    by $a_n = f(A - \{ a_0, \ldots, a_{n-1} \})$. \qed
\end{proof}

\begin{corollary}[AC]
    A set is infinite if and only if it is equinumerous with a proper subset.
\end{corollary}

\section{Countability}

\begin{definition}[Countable]
    A set $A$ is \emph{countable} iff $A \preccurlyeq \NN$.
\end{definition}

\begin{theorem}[AC]
    A countable union of countable sets is countable.
\end{theorem}

\begin{proposition}[AC]
    Every infinite set has a countable subset.
\end{proposition}